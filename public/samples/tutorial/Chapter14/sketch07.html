<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <style>
    body { margin: 0; }
    canvas { display: block; }
    </style>
    <script src="/js/libs/p5.js"></script>
    <script src="/js/libs/p5.dom.js"></script>
    <script>
        "use strict";
        
        var isLoop = false;
        
        var numBalls = 100;
        var x = [];
        var y = [];
        var vx = [];
        var vy = [];
        var radius = [];
        var c = [];
        
        function setup() {
            createCanvas(window.innerWidth, window.innerHeight);
            noLoop();
            init();
        }
        
        function init() {
            frameRate(60);
            for (var i = 0; i < numBalls; i++) {
                radius.push(random(10, 20));
                x.push(random(radius[i], width-radius[i]));
                y.push(random(radius[i], height-radius[i]));
                vx.push(random(-5, 5));
                vy.push(random(-5, 5));
                c.push(color(random(255), random(255), random(255), random(255)));
            }
        }
        
        function draw() {
            background(255);
            
            for (var i = 0; i < numBalls; i++) {
                // ボールの位置を更新
                x[i] += vx[i];
                y[i] += vy[i];
                // 左右の壁との当たり判定
                if (x[i]-radius[i] <= 0 || x[i]+radius[i] >= width) {
                    vx[i] *= -1;
                }
                // 上下の壁との当たり判定
                if (y[i]-radius[i] <= 0 || y[i]+radius[i] >= height) {
                    vy[i] *= -1;
                }
                // ボールを描画
                noStroke();
                fill(c[i]);
                ellipse(x[i], y[i], 2*radius[i], 2*radius[i]);
            }
        }
        
        function windowResized() {
            resizeCanvas(window.innerWidth, window.innerHeight);
        }
        
        function switchLoop() {
            if (isLoop) {
                noLoop();
                isLoop = false;
            } else {
                loop();
                isLoop = true;
            }
        }
        
        window.addEventListener("mouseover", switchLoop, false);
        window.addEventListener("mouseout", switchLoop, false);
    </script>
</head>
<body>
</body>
</html>
