<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">
    <title>P5 Code School Chapter11「三角関数」</title>
    <link href="https://fonts.googleapis.com/css?family=Elsie+Swash+Caps" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
    <script src="/js/libs/jquery.js"></script>
    <script src="/js/libs/p5.js"></script>
    <script src="/js/libs/p5.dom.js"></script>
    <script src="/js/main.js"></script>
    <script src="/js/header-sketch.js"></script>
</head>

<body>
    <div id="p5Header"></div>
    <header id="header">
        <span id="title-p5">P5</span>
        <span id="title-code">Code</span>
        <span id="title-school">School</span>
    </header>

<div id="mainNavigation">
    <nav class="page-navi">
        <h3 class="side-title">Contents</h3>
        <ul>
            <li>
                <a href="/index.html">
                    <div class="link-text">トップ</div>
                    <div class="rect"></div>
                    <div class="line"></div>
                </a>
            </li>
            <li>
                <a href="/tutorial/index.html">
                    <div class="link-text">チュートリアル</div>
                    <div class="rect"></div>
                    <div class="line"></div>
                </a>
            </li>
            
            <li>
                <a href="/tutorial/chapter10">
                    <div class="link-text">前のChapter</div>
                    <div class="rect"></div>
                    <div class="line"></div>
                </a>
            </li>
            
            
            <li>
                <a href="/tutorial/chapter12">
                    <div class="link-text">次のChapter</div>
                    <div class="rect"></div>
                    <div class="line"></div>
                </a>
            </li>
            
        </ul>
    </nav>
    <div class="author">
        <h3 class="side-title">Author</h3>
        <ul>
            <li>
                <a href="https://twitter.com/P5Aholic" target="_blank">
                    <div class="link-text">Twitter</div>
                    <div class="rect"></div>
                    <div class="line"></div>
                </a>
            </li>
            <li>
                <a href="http://p5aholic.hatenablog.com/" target="_blank">
                    <div class="link-text">Blog</div>
                    <div class="rect"></div>
                    <div class="line"></div>
                </a>
            </li>
        </ul>
    </div>
    
    <div id="naviControll">
        <div id="layer1"></div>
        <div id="layer2"></div>
        <div id="layer3"></div>
    </div>
</div>

<article id="mainContents">
    <h1>三角関数</h1><p>三角関数を使うとどのような表現ができるか解説していきます。</p>
<h2>sin()とcos()</h2><p>高校で習うサインとコサインはsin()とcos()で表現できます。サイン、コサインとは何なのかという話はかなーり奥の深い数学の話になってしまうので、ここでは使い方に重点を置いて解説します。</p>
<p>sin()とcos()のパラメータには角度をラジアン値で渡します。そして、sin()とcos()は渡されたラジアン値をもとに-1～1の値を返します。とりあえずsin()とcos()がどのような値を返すのか見てみましょう。まずはcos()から。</p>
<iframe src="/samples/tutorial/Chapter11/sketch01.html" class="sample-sketch"></iframe>

<p><a href='https://github.com/p5aholic/p5codeschool/blob/master/samples/Chapter11/sketch01/sketch01.pde' target='_blank'>Chapter11/sketch01.pde</a></p>
<pre><code class="lang-processing"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span>() {
  <span class="hljs-built_in">size</span>(<span class="hljs-number">750</span>, <span class="hljs-number">350</span>);
  <span class="hljs-built_in">stroke</span>(<span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
  <span class="hljs-built_in">strokeWeight</span>(<span class="hljs-number">20</span>);
}

<span class="hljs-keyword">void</span> <span class="hljs-title">draw</span>() {
  <span class="hljs-built_in">background</span>(<span class="hljs-number">255</span>);
  <span class="hljs-comment">// 原点を画面中心に移動</span>
  <span class="hljs-built_in">translate</span>(<span class="hljs-built_in">width</span>/<span class="hljs-number">2</span>, <span class="hljs-built_in">height</span>/<span class="hljs-number">2</span>);

  <span class="hljs-comment">// cos()が返した値をxに代入</span>
  <span class="hljs-built_in">float</span> x = <span class="hljs-number">100</span> * <span class="hljs-built_in">cos</span>(<span class="hljs-built_in">frameCount</span> * <span class="hljs-number">0.05</span>);

  <span class="hljs-comment">// xを表す点を描画してみる</span>
  <span class="hljs-built_in">point</span>(x, <span class="hljs-number">0</span>);
}
</code></pre>
<p>sin()とcos()が返す値は-1～1なので、わかりやすいように100を掛けています。sin()も同じようにしてどのような値を返すのか見てみましょう。</p>
<iframe src="/samples/tutorial/Chapter11/sketch02.html" class="sample-sketch"></iframe>

<p><a href='https://github.com/p5aholic/p5codeschool/blob/master/samples/Chapter11/sketch02/sketch02.pde' target='_blank'>Chapter11/sketch02.pde</a></p>
<pre><code class="lang-processing"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span>() {
  <span class="hljs-built_in">size</span>(<span class="hljs-number">750</span>, <span class="hljs-number">350</span>);
  <span class="hljs-built_in">stroke</span>(<span class="hljs-number">0</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0</span>);
  <span class="hljs-built_in">strokeWeight</span>(<span class="hljs-number">20</span>);
}

<span class="hljs-keyword">void</span> <span class="hljs-title">draw</span>() {
  <span class="hljs-built_in">background</span>(<span class="hljs-number">255</span>);
  <span class="hljs-comment">// 原点を画面中心に移動</span>
  <span class="hljs-built_in">translate</span>(<span class="hljs-built_in">width</span>/<span class="hljs-number">2</span>, <span class="hljs-built_in">height</span>/<span class="hljs-number">2</span>);

  <span class="hljs-comment">// sin()が返した値をyに代入</span>
  <span class="hljs-built_in">float</span> y = <span class="hljs-number">100</span> * <span class="hljs-built_in">sin</span>(<span class="hljs-built_in">frameCount</span> * <span class="hljs-number">0.05</span>);

  <span class="hljs-comment">// yを表す点を描画してみる</span>
  <span class="hljs-built_in">point</span>(<span class="hljs-number">0</span>, y);
}
</code></pre>
<p>では、この２つを組み合わせてpoint(x, y)を描画してみましょう。</p>
<iframe src="/samples/tutorial/Chapter11/sketch03.html" class="sample-sketch"></iframe>

<p><a href='https://github.com/p5aholic/p5codeschool/blob/master/samples/Chapter11/sketch03/sketch03.pde' target='_blank'>Chapter11/sketch03.pde</a></p>
<pre><code class="lang-processing"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span>() {
  <span class="hljs-built_in">size</span>(<span class="hljs-number">750</span>, <span class="hljs-number">350</span>);
  <span class="hljs-built_in">stroke</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">255</span>);
  <span class="hljs-built_in">strokeWeight</span>(<span class="hljs-number">20</span>);
}

<span class="hljs-keyword">void</span> <span class="hljs-title">draw</span>() {
  <span class="hljs-built_in">background</span>(<span class="hljs-number">255</span>);
  <span class="hljs-built_in">translate</span>(<span class="hljs-built_in">width</span>/<span class="hljs-number">2</span>, <span class="hljs-built_in">height</span>/<span class="hljs-number">2</span>);

  <span class="hljs-built_in">float</span> x = <span class="hljs-number">100</span>*<span class="hljs-built_in">cos</span>(<span class="hljs-built_in">frameCount</span> * <span class="hljs-number">0.05</span>);
  <span class="hljs-built_in">float</span> y = <span class="hljs-number">100</span>*<span class="hljs-built_in">sin</span>(<span class="hljs-built_in">frameCount</span> * <span class="hljs-number">0.05</span>);

  <span class="hljs-built_in">point</span>(x, y);
}
</code></pre>
<p>どうやらcos()が返す値をx座標とし、sin()が返す値をy座標とするとpoint(x, y)は円を描くようにグルグル回るようです。このことがわかったうえで、高校で習う三角関数がどのようなものかをちょっとだけ解説します。</p>
<p>高校数学では、サインとコサインは次のように表現されています。</p>
<p>半径rの円が原点にあったとして、αはx軸との角度を表し、座標(x, y)はx軸との角度αの円上の点を表しています。このとき、<br>
sin(α) = y / r<br>
cos(α) = x / r<br>
となります。r = 1だったとすると、当然<br>
sin(α) = y<br>
cos(α) = x<br>
になります。この半径1のときのsin(α)とcos(α)が、Processingのsin()とcos()になります。sin()とcos()はパラメータにx軸との角度αを渡すと、角度αで半径1の円上の点の座標を返す関数です。ただし、Processingの座標系は高校数学で使う座標系とは違い、角度が時計回りに増えていくことに注意です。</p>
<p>次のプログラムではsin()とcos()を使って円状に点を描画しています。</p>
<iframe src="/samples/tutorial/Chapter11/sketch04.html" class="sample-sketch"></iframe>

<p><a href='https://github.com/p5aholic/p5codeschool/blob/master/samples/Chapter11/sketch04/sketch04.pde' target='_blank'>Chapter11/sketch04.pde</a></p>
<pre><code class="lang-processing"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span>() {
  <span class="hljs-built_in">size</span>(<span class="hljs-number">750</span>, <span class="hljs-number">350</span>);
  <span class="hljs-built_in">noLoop</span>();
  <span class="hljs-built_in">stroke</span>(<span class="hljs-number">0</span>);
  <span class="hljs-built_in">strokeWeight</span>(<span class="hljs-number">10</span>);
}

<span class="hljs-keyword">void</span> <span class="hljs-title">draw</span>() {
  <span class="hljs-built_in">background</span>(<span class="hljs-number">255</span>);
  <span class="hljs-built_in">translate</span>(<span class="hljs-built_in">width</span>/<span class="hljs-number">2</span>, <span class="hljs-built_in">height</span>/<span class="hljs-number">2</span>);

  <span class="hljs-comment">// 0度から360度になるまで5度ずつ増やす</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">360</span>; i += <span class="hljs-number">5</span>) {
    <span class="hljs-comment">// ラジアンに変換</span>
    <span class="hljs-built_in">float</span> angle = <span class="hljs-built_in">radians</span>(i);
    <span class="hljs-comment">// 半径150の円上の座標を計算</span>
    <span class="hljs-built_in">float</span> x = <span class="hljs-number">150</span> * <span class="hljs-built_in">cos</span>(angle);
    <span class="hljs-built_in">float</span> y = <span class="hljs-number">150</span> * <span class="hljs-built_in">sin</span>(angle);
    <span class="hljs-comment">// 点を描画</span>
    <span class="hljs-built_in">point</span>(x, y);
  }
}
</code></pre>
<p>このプログラムでは360度になるまで描画していますが、マウスのx座標をmap()を使って角度に変換すると次のようになります。</p>
<iframe src="/samples/tutorial/Chapter11/sketch05.html" class="sample-sketch"></iframe>

<p><a href='https://github.com/p5aholic/p5codeschool/blob/master/samples/Chapter11/sketch05/sketch05.pde' target='_blank'>Chapter11/sketch05.pde</a></p>
<pre><code class="lang-processing"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span>() {
  <span class="hljs-built_in">size</span>(<span class="hljs-number">750</span>, <span class="hljs-number">350</span>);
  <span class="hljs-built_in">stroke</span>(<span class="hljs-number">0</span>);
  <span class="hljs-built_in">strokeWeight</span>(<span class="hljs-number">10</span>);
}

<span class="hljs-keyword">void</span> <span class="hljs-title">draw</span>() {
  <span class="hljs-built_in">background</span>(<span class="hljs-number">255</span>);
  <span class="hljs-built_in">translate</span>(<span class="hljs-built_in">width</span>/<span class="hljs-number">2</span>, <span class="hljs-built_in">height</span>/<span class="hljs-number">2</span>);

  <span class="hljs-comment">// マウスのx座標を角度に変換</span>
  <span class="hljs-built_in">float</span> endAngle = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">mouseX</span>, <span class="hljs-number">0</span>, <span class="hljs-built_in">width</span>, <span class="hljs-number">0</span>, <span class="hljs-number">360</span>);

  <span class="hljs-comment">// 0度からendAngleになるまで5度ずつ増やす</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; endAngle; i += <span class="hljs-number">5</span>) {
    <span class="hljs-built_in">float</span> angle = <span class="hljs-built_in">radians</span>(i);
    <span class="hljs-built_in">float</span> x = <span class="hljs-number">150</span> * <span class="hljs-built_in">cos</span>(angle);
    <span class="hljs-built_in">float</span> y = <span class="hljs-number">150</span> * <span class="hljs-built_in">sin</span>(angle);
    <span class="hljs-built_in">point</span>(x, y);
  }
}
</code></pre>
<p>次のプログラムでは、画面の左端から右端まで15px間隔で円を描画しています。 円のy座標をx座標に応じてsin()で変動させています。</p>
<iframe src="/samples/tutorial/Chapter11/sketch06.html" class="sample-sketch"></iframe>

<p><a href='https://github.com/p5aholic/p5codeschool/blob/master/samples/Chapter11/sketch06/sketch06.pde' target='_blank'>Chapter11/sketch06.pde</a></p>
<pre><code class="lang-processing"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span>() {
  <span class="hljs-built_in">size</span>(<span class="hljs-number">750</span>, <span class="hljs-number">350</span>);
  <span class="hljs-built_in">noLoop</span>();
  <span class="hljs-built_in">noStroke</span>();
  <span class="hljs-built_in">fill</span>(<span class="hljs-number">0</span>);
}

<span class="hljs-keyword">void</span> <span class="hljs-title">draw</span>() {
  <span class="hljs-built_in">background</span>(<span class="hljs-number">255</span>);

  <span class="hljs-comment">// 左端から右端まで15px間隔で円を描画</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> x = <span class="hljs-number">0</span>; x &lt;= <span class="hljs-built_in">width</span>; x += <span class="hljs-number">15</span>) {
    <span class="hljs-comment">// xに応じて高さを変える</span>
    <span class="hljs-built_in">float</span> y = <span class="hljs-built_in">height</span>/<span class="hljs-number">2</span> + <span class="hljs-number">100</span> * <span class="hljs-built_in">sin</span>(x * <span class="hljs-number">0.01</span>);
    <span class="hljs-built_in">ellipse</span>(x, y, <span class="hljs-number">15</span>, <span class="hljs-number">15</span>);
  }
}
</code></pre>
<p>円のy座標は次のように決めています。</p>
<p><code class='code-fragment'>float y = height/2 + 100 * sin(x*0.01);</code></p>
<p>まずsin()にx*0.01を渡します。x*0.01が角度として扱われるので、画面の右端に行くほど角度は大きくなっていきます。これで100*sin(x*0.01)は0 → 100 → 0 → -100 → 0のように値が変わっていくことになります。すると、yはheight/2を中心としてheight/2-100～height/2+100の間を動くことになります。</p>
<p>xの最大値は700なので、x<em>0.01の最大値は7になります。TWO_PIが約6.28なので、sin(x\</em>0.01)は一周(TWO_PI)とちょっと回ったことになります。xに掛ける値を大きくすれば高さの変化が速くなり、小さくすれば遅くなります。色々試してみてください。</p>
<p>高さの決め方をちょこっと変えると次のようなものも作れます。</p>
<iframe src="/samples/tutorial/Chapter11/sketch07.html" class="sample-sketch"></iframe>

<p><a href='https://github.com/p5aholic/p5codeschool/blob/master/samples/Chapter11/sketch07/sketch07.pde' target='_blank'>Chapter11/sketch07.pde</a></p>
<pre><code class="lang-processing"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span>() {
  <span class="hljs-built_in">size</span>(<span class="hljs-number">750</span>, <span class="hljs-number">350</span>);
  <span class="hljs-built_in">noStroke</span>();
  <span class="hljs-built_in">fill</span>(<span class="hljs-number">0</span>);
}

<span class="hljs-keyword">void</span> <span class="hljs-title">draw</span>() {
  <span class="hljs-built_in">background</span>(<span class="hljs-number">255</span>);

  <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> x = <span class="hljs-number">0</span>; x &lt;= <span class="hljs-built_in">width</span>; x += <span class="hljs-number">15</span>) {
    <span class="hljs-built_in">float</span> y = <span class="hljs-built_in">height</span>/<span class="hljs-number">2</span> + <span class="hljs-number">100</span> * <span class="hljs-built_in">sin</span>(<span class="hljs-built_in">frameCount</span> * <span class="hljs-number">0.04</span> + x * <span class="hljs-number">0.02</span>);
    <span class="hljs-built_in">ellipse</span>(x, y, <span class="hljs-number">15</span>, <span class="hljs-number">15</span>);
  }
}
</code></pre>
<p>波が右から左に流れているのように見えますが、円を左に動かしているわけではありません。sin()の中にframeCount*0.04を加えたので１つ１つの円のy座標が変動するようになりました。全ての円でframeCount*0.04の値は同じで、隣り合った円のy座標の差はsin(x*0.02)になります。</p>
<p>上の２つのプログラムではsin()を使って円のy座標を変動させていましたが、次のプログラムでは画面左端から右端まで1pxの太さで描画された縦線を描画し、その色を変動させています。</p>
<iframe src="/samples/tutorial/Chapter11/sketch08.html" class="sample-sketch"></iframe>

<p><a href='https://github.com/p5aholic/p5codeschool/blob/master/samples/Chapter11/sketch08/sketch08.pde' target='_blank'>Chapter11/sketch08.pde</a></p>
<pre><code class="lang-processing"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span>() {
  <span class="hljs-built_in">size</span>(<span class="hljs-number">750</span>, <span class="hljs-number">350</span>);
  <span class="hljs-built_in">noLoop</span>();
}

<span class="hljs-keyword">void</span> <span class="hljs-title">draw</span>() {
  <span class="hljs-comment">// 左端から右端まで太さ1pxの縦線を敷き詰める</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> x = <span class="hljs-number">0</span>; x &lt;= <span class="hljs-built_in">width</span>; x++) {
    <span class="hljs-comment">// xに応じて色変える</span>
    <span class="hljs-built_in">float</span> c = <span class="hljs-number">255</span> * <span class="hljs-built_in">abs</span>(<span class="hljs-built_in">sin</span>(x * <span class="hljs-number">0.01</span>));
    <span class="hljs-built_in">stroke</span>(c);
    <span class="hljs-built_in">line</span>(x, <span class="hljs-number">0</span>, x, <span class="hljs-built_in">height</span>);
  }
}
</code></pre>
<p>sin()は-1～1の値を返しますが、色にマイナス値はないのでabs()を使ってsin()の絶対値を取っています。sin()の中にframeCountを加えると次のようになります。</p>
<iframe src="/samples/tutorial/Chapter11/sketch09.html" class="sample-sketch"></iframe>

<p><a href='https://github.com/p5aholic/p5codeschool/blob/master/samples/Chapter11/sketch09/sketch09.pde' target='_blank'>Chapter11/sketch09.pde</a></p>
<pre><code class="lang-processing"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span>() {
  <span class="hljs-built_in">size</span>(<span class="hljs-number">750</span>, <span class="hljs-number">350</span>);
}

<span class="hljs-keyword">void</span> <span class="hljs-title">draw</span>() {
  <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> x = <span class="hljs-number">0</span>; x &lt;= <span class="hljs-built_in">width</span>; x++) {
    <span class="hljs-built_in">float</span> c = <span class="hljs-number">255</span> * <span class="hljs-built_in">abs</span>(<span class="hljs-built_in">sin</span>(<span class="hljs-built_in">frameCount</span> * <span class="hljs-number">0.04</span> + x * <span class="hljs-number">0.04</span>));
    <span class="hljs-built_in">stroke</span>(c);
    <span class="hljs-built_in">line</span>(x, <span class="hljs-number">0</span>, x, <span class="hljs-built_in">height</span>);
  }
}
</code></pre>
<p>上下に変動する円のプログラムのように、右から左に動いているように見えますが、線の位置は全く動いていません。変わっているのは線の色だけです。</p>
<p>お疲れさまでした。Chapter11はこれで終了です。</p>

</article>
    <footer>
        <p>&copy P5 Code School 2015</p>
    </footer>
</body>
</html>

